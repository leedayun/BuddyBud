<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.swe.buddybud.Mapper.AccountMapper">

    <!--  사용자 정보 조회  -->
    <select id="getUserInfo" resultType="java.util.Map">
        SELECT
            *
        FROM
            M_USER
        WHERE
            seq = #{userId}
    </select>

    <!--  사용자 작성글 목록 조회  -->
    <select id="getUserPostsList" resultType="java.util.Map">
        SELECT
            title, content, url, created_at, last_modified_at
        FROM
            B_POST
        WHERE
            user_no = #{userId}
        ORDER BY
            created_at DESC;
    </select>

    <!--  사용자 스크랩 목록 조회  -->
    <select id="getUserScrapsList" resultType="java.util.Map">
        SELECT
            B_SCRAP.post_no AS post_no,
            B_POST.title AS title,
            B_POST.content AS content,
            B_POST.url AS url,
            B_POST.created_at AS created_at
            B_POST.last_modified_at AS last_modified_at
        FROM
            B_SCRAP
                INNER JOIN
            B_POST ON B_SCRAP.post_no = B_POST.seq
                INNER JOIN
            M_USER ON B_SCRAP.user_no = M_USER.seq
        WHERE
            M_USER.seq = #{userId}
        ORDER BY
            B_SCRAP.post_no DESC;
    </select>

</mapper>